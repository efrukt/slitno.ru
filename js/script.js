document.addEventListener('DOMContentLoaded', function() {
    // Словарь сложных случаев
    const dictionaryData = [
        {
            word: 'невозможно',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от прилагательного с приставкой "не".'
        },
        {
            word: 'не возможно',
            type: 'separate',
            explanation: 'Пишется раздельно в случаях, когда "не" является отрицательной частицей при слове "возможно".'
        },
        {
            word: 'по-русски',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие, образованное от прилагательного с помощью приставки "по" и суффикса "ски".'
        },
        {
            word: 'кое-где',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это местоименное наречие с приставкой "кое-".'
        },
        {
            word: 'вничью',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от существительного с предлогом.'
        },
        {
            word: 'в ничью',
            type: 'separate',
            explanation: 'Пишется раздельно, когда используется в значении "в ничью сторону".'
        },
        {
            word: 'по-весеннему',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие с приставкой "по-" и суффиксом "-ему".'
        },
        {
            word: 'потому что',
            type: 'separate',
            explanation: 'Пишется раздельно, так как это составной союз.'
        },
        {
            word: 'из-за',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это производный предлог.'
        },
        {
            word: 'вследствие',
            type: 'together',
            explanation: 'Пишется слитно, так как это производный предлог, образованный от существительного с предлогом.'
        },
        {
            word: 'в следствии',
            type: 'separate',
            explanation: 'Пишется раздельно, когда используется в значении "в ходе следствия".'
        },
        {
            word: 'как будто',
            type: 'separate',
            explanation: 'Пишется раздельно, так как это составной союз.'
        },
        {
            word: 'несмотря на',
            type: 'together',
            explanation: 'Пишется слитно, так как это производный предлог.'
        },
        {
            word: 'не смотря',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "не" – отрицательная частица, а "смотря" – деепричастие.'
        },
        {
            word: 'в течение',
            type: 'separate',
            explanation: 'Пишется раздельно, так как это предложное сочетание.'
        },
        {
            word: 'втечение',
            type: 'together',
            explanation: 'Неправильное написание предлога "в течение".'
        },
        {
            word: 'наподобие',
            type: 'together',
            explanation: 'Пишется слитно, так как это производный предлог.'
        },
        {
            word: 'в продолжение',
            type: 'separate',
            explanation: 'Пишется раздельно, так как это предложное сочетание.'
        },
        {
            word: 'насчет',
            type: 'together',
            explanation: 'Пишется слитно, так как это производный предлог.'
        },
        {
            word: 'на счет',
            type: 'separate',
            explanation: 'Пишется раздельно, когда означает "на банковский счет".'
        },
        {
            word: 'по-прежнему',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие с приставкой "по-" и суффиксом "-ему".'
        },
        {
            word: 'чуть-чуть',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие, образованное повторением слова.'
        },
        {
            word: 'еле-еле',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие, образованное повторением слова.'
        },
        {
            word: 'полдома',
            type: 'together',
            explanation: 'Пишется слитно, так как вторая часть начинается с согласной, кроме "л".'
        },
        {
            word: 'пол-лимона',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как вторая часть начинается с "л".'
        },
        {
            word: 'из-под',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это производный предлог.'
        },
        {
            word: 'во-первых',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие с приставкой "во-" и суффиксом "-ых".'
        },
        {
            word: 'не был',
            type: 'separate',
            explanation: 'Пишется раздельно, так как с глаголами "не" всегда пишется раздельно.'
        },
        {
            word: 'некого',
            type: 'together',
            explanation: 'Пишется слитно, так как это отрицательное местоимение без предлога.'
        },
        {
            word: 'не с кем',
            type: 'separate',
            explanation: 'Пишется раздельно, так как это отрицательное местоимение с предлогом.'
        },
        {
            word: 'неправда',
            type: 'together',
            explanation: 'Пишется слитно, так как с "не" образуется слово с противоположным значением (= ложь).'
        },
        {
            word: 'ненависть',
            type: 'together',
            explanation: 'Пишется слитно, так как без "не" слово не употребляется.'
        },
        {
            word: 'не рад',
            type: 'separate',
            explanation: 'Пишется раздельно с краткими прилагательными.'
        },
        {
            word: 'бок о бок',
            type: 'separate',
            explanation: 'Пишется раздельно, так как это наречное выражение.'
        },
        {
            word: 'ввиду',
            type: 'together',
            explanation: 'Пишется слитно, так как это производный предлог в значении "по причине".'
        },
        {
            word: 'в виду',
            type: 'separate',
            explanation: 'Пишется раздельно, когда используется в значении "иметь в виду".'
        },
        {
            word: 'впервые',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от числительного с приставкой "в-".'
        },
        {
            word: 'навстречу',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от существительного с предлогом.'
        },
        {
            word: 'на встречу',
            type: 'separate',
            explanation: 'Пишется раздельно, когда используется в значении "прийти на встречу".'
        },
        {
            word: 'где-нибудь',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как содержит постфикс "-нибудь".'
        },
        {
            word: 'как-либо',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как содержит постфикс "-либо".'
        },
        {
            word: 'что-то',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как содержит постфикс "-то".'
        },
        {
            word: 'темно-синий',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это сложное прилагательное, обозначающее оттенок цвета.'
        },
        {
            word: 'северо-запад',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это сложное существительное, обозначающее стороны света.'
        },
        {
            word: 'научно-технический',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это сложное прилагательное, образованное от равноправных слов.'
        },
        {
            word: 'русско-английский',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это сложное прилагательное, образованное от равноправных слов.'
        },
        {
            word: 'вице-президент',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как первая часть – приставка "вице-".'
        },
        {
            word: 'экс-чемпион',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как первая часть – приставка "экс-".'
        },
        {
            word: 'мини-маркет',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как первая часть – приставка "мини-".'
        },
        {
            word: 'по одному',
            type: 'separate',
            explanation: 'Пишется раздельно, так как это предлог с числительным.'
        },
        {
            word: 'вверх',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от существительного с предлогом.'
        },
        {
            word: 'в верх',
            type: 'separate',
            explanation: 'Пишется раздельно, когда употребляется в значении "в верхнюю часть".'
        },
        {
            word: 'наизусть',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от существительного с предлогом.'
        },
        {
            word: 'до свидания',
            type: 'separate',
            explanation: 'Пишется раздельно, так как это устойчивое сочетание предлога с существительным.'
        },
        {
            word: 'досвидания',
            type: 'together',
            explanation: 'Неправильный вариант написания "до свидания".'
        },
        {
            word: 'в общем',
            type: 'separate',
            explanation: 'Пишется раздельно, когда используется в значении "в общих чертах".'
        },
        {
            word: 'вообще',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие.'
        },
        {
            word: 'итак',
            type: 'together',
            explanation: 'Пишется слитно, так как это вводное слово, выражающее вывод.'
        },
        {
            word: 'и так',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "и" - союз, а "так" - наречие.'
        },
        {
            word: 'тоже',
            type: 'together',
            explanation: 'Пишется слитно, когда это союз, синонимичный союзу "и".'
        },
        {
            word: 'то же',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "то" - местоимение, а "же" - частица.'
        },
        {
            word: 'также',
            type: 'together',
            explanation: 'Пишется слитно, когда это союз, синонимичный союзу "и".'
        },
        {
            word: 'так же',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "так" - наречие, а "же" - частица.'
        },
        {
            word: 'причём',
            type: 'together',
            explanation: 'Пишется слитно, так как это присоединительный союз.'
        },
        {
            word: 'при чём',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "при" - предлог, а "чём" - местоимение.'
        },
        {
            word: 'зачем',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от местоимения с предлогом.'
        },
        {
            word: 'за чем',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "за" - предлог, а "чем" - местоимение.'
        },
        {
            word: 'почему',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от местоимения с предлогом.'
        },
        {
            word: 'по чему',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "по" - предлог, а "чему" - местоимение.'
        },
        {
            word: 'отчего',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от местоимения с предлогом.'
        },
        {
            word: 'от чего',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "от" - предлог, а "чего" - местоимение.'
        },
        {
            word: 'сверху',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от существительного с предлогом.'
        },
        {
            word: 'с верху',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "с" - предлог, а "верху" - существительное.'
        },
        {
            word: 'вглубь',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от существительного с предлогом.'
        },
        {
            word: 'в глубь',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "в" - предлог, а "глубь" - существительное.'
        },
        {
            word: 'всерьёз',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от существительного с предлогом.'
        },
        {
            word: 'на ходу',
            type: 'separate',
            explanation: 'Пишется раздельно, так как можно вставить определение: "на быстром ходу".'
        },
        {
            word: 'под мышкой',
            type: 'separate',
            explanation: 'Пишется раздельно, так как можно вставить определение: "под левой мышкой".'
        },
        {
            word: 'поначалу',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от существительного с предлогом.'
        },
        {
            word: 'по началу',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "по" - предлог, а "началу" - существительное в дательном падеже.'
        },
        {
            word: 'сначала',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от существительного с предлогом.'
        },
        {
            word: 'с начала',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "с" - предлог, а "начала" - существительное в родительном падеже.'
        },
        {
            word: 'вскоре',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от существительного с предлогом.'
        },
        {
            word: 'в скором',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "в" - предлог, а "скором" - прилагательное в предложном падеже.'
        },
        {
            word: 'по-английски',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие с приставкой "по-" и суффиксом "-ски".'
        },
        {
            word: 'по-товарищески',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие с приставкой "по-" и суффиксом "-ески".'
        },
        {
            word: 'по-моему',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие с приставкой "по-" и местоименной формой.'
        },
        {
            word: 'по моему мнению',
            type: 'separate',
            explanation: 'Пишется раздельно, так как "по" - предлог, а "моему" - местоимение.'
        },
        {
            word: 'как-никак',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие, образованное повторением слов.'
        },
        {
            word: 'волей-неволей',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие, образованное парой противоположных по смыслу слов.'
        },
        {
            word: 'крест-накрест',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие, образованное сочетанием близких по значению слов.'
        },
        {
            word: 'мало-помалу',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это наречие, образованное повторением основы с разными приставками.'
        },
        {
            word: 'всё-таки',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это частица, образованная сочетанием слов, одно из которых содержит "таки".'
        },
        {
            word: 'всё же',
            type: 'separate',
            explanation: 'Пишется раздельно, так как "же" - частица, которая пишется раздельно с другими словами.'
        },
        {
            word: 'как будто бы',
            type: 'separate',
            explanation: 'Пишется раздельно, так как это составной союз с частицей "бы".'
        },
        {
            word: 'социально-экономический',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это сложное прилагательное, образованное от равноправных по смыслу прилагательных.'
        },
        {
            word: 'общественно-политический',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это сложное прилагательное, образованное от равноправных по смыслу прилагательных.'
        },
        {
            word: 'историко-филологический',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как это сложное прилагательное, образованное от равноправных по смыслу прилагательных.'
        },
        {
            word: 'кто-то',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как к местоимению добавлена постфикс "-то".'
        },
        {
            word: 'куда-либо',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как к наречию добавлен постфикс "-либо".'
        },
        {
            word: 'какой-нибудь',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как к местоимению добавлен постфикс "-нибудь".'
        },
        {
            word: 'откуда-то',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как к наречию добавлен постфикс "-то".'
        },
        {
            word: 'кое-кто',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как к местоимению добавлена приставка "кое-".'
        },
        {
            word: 'полу-остров',
            type: 'hyphen',
            explanation: 'Неправильное написание. Правильно: "полуостров" (слитно).'
        },
        {
            word: 'полуостров',
            type: 'together',
            explanation: 'Пишется слитно, так как это слово с приставкой "полу-".'
        },
        {
            word: 'пол-яблока',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как вторая часть начинается с гласной "я".'
        },
        {
            word: 'пол-листа',
            type: 'hyphen',
            explanation: 'Пишется через дефис, так как вторая часть начинается с "л".'
        },
        {
            word: 'полметра',
            type: 'together',
            explanation: 'Пишется слитно, так как вторая часть начинается с согласной, кроме "л".'
        },
        {
            word: 'чтобы',
            type: 'together',
            explanation: 'Пишется слитно, так как это подчинительный союз со значением цели или условия.'
        },
        {
            word: 'что бы',
            type: 'separate',
            explanation: 'Пишется раздельно, когда "что" - местоимение или союз, а "бы" - частица (можно вставить другое слово между ними).'
        },
        {
            word: 'попозже',
            type: 'together',
            explanation: 'Пишется слитно, так как это наречие, образованное от слова "поздно" с приставкой "по-".'
        }
    ];

    // Данные для правил
    const rulesData = {
        together: {
            title: 'Слитное написание',
            content: `
                <h2>Слитное написание слов в русском языке</h2>
                
                <h3>Слитное написание наречий</h3>
                <p>Пишутся слитно наречия, образованные:</p>
                <ul>
                    <li>от прилагательных с приставками <em>в-, на-, за-</em> и суффиксами <em>-о, -е</em>: <strong>влево, наверное, засветло</strong>;</li>
                    <li>от числительных с приставками <em>в-, на-</em>: <strong>впервые, натрое</strong>;</li>
                    <li>от местоимений с предлогами: <strong>почему, затем, вовсю</strong>;</li>
                    <li>от существительных, если между предлогом и существительным нельзя вставить определение: <strong>вверх, сбоку, вдаль</strong>.</li>
                </ul>
                
                <h3>Слитное написание предлогов</h3>
                <p>Пишутся слитно производные предлоги:</p>
                <ul>
                    <li><strong>ввиду</strong> (= по причине);</li>
                    <li><strong>вместо</strong>;</li>
                    <li><strong>внутри</strong>;</li>
                    <li><strong>вроде</strong> (= подобно);</li>
                    <li><strong>вследствие</strong> (= из-за);</li>
                    <li><strong>навстречу</strong>;</li>
                    <li><strong>наподобие</strong>;</li>
                    <li><strong>насчет</strong> (= о).</li>
                </ul>
                
                <h3>Слитное написание с "не"</h3>
                <p>Пишутся слитно с "не":</p>
                <ul>
                    <li>слова, которые без "не" не употребляются: <strong>невежда, ненастье, нелепость</strong>;</li>
                    <li>существительные, прилагательные и наречия, если с "не" образуется слово с противоположным значением: <strong>неправда</strong> (= ложь), <strong>невысокий</strong> (= низкий);</li>
                    <li>прилагательные, наречия на -о, -е, если при них нет пояснительных слов: <strong>неглубокая река</strong>;</li>
                    <li>полные причастия без зависимых слов и противопоставления: <strong>невыученный урок</strong>;</li>
                    <li>отрицательные местоимения без предлога: <strong>некого, нечем</strong>.</li>
                </ul>
            `
        },
        separate: {
            title: 'Раздельное написание',
            content: `
                <h2>Раздельное написание слов в русском языке</h2>
                
                <h3>Раздельное написание наречий</h3>
                <p>Пишутся раздельно наречные сочетания:</p>
                <ul>
                    <li>состоящие из предлога и существительного, между которыми можно вставить определение: <strong>в глубине</strong> (в большой глубине);</li>
                    <li>состоящие из предлога и прилагательного: <strong>в открытую</strong>;</li>
                    <li>состоящие из двух существительных с предлогом между ними: <strong>бок о бок</strong>;</li>
                    <li>состоящие из повторяющихся существительных с предлогом между: <strong>день за днем</strong>.</li>
                </ul>
                
                <h3>Раздельное написание предлогов</h3>
                <p>Пишутся раздельно сочетания:</p>
                <ul>
                    <li><strong>в виде</strong>;</li>
                    <li><strong>в деле</strong>;</li>
                    <li><strong>в области</strong>;</li>
                    <li><strong>в продолжение</strong>;</li>
                    <li><strong>в течение</strong>;</li>
                    <li><strong>в целях</strong>;</li>
                    <li><strong>по мере</strong>;</li>
                    <li><strong>со стороны</strong>.</li>
                </ul>
                
                <h3>Раздельное написание с "не"</h3>
                <p>Пишутся раздельно с "не":</p>
                <ul>
                    <li>глаголы и деепричастия: <strong>не читал, не спеша</strong>;</li>
                    <li>числительные, местоимения (кроме отрицательных без предлога), краткие причастия: <strong>не я, не три, не сделано</strong>;</li>
                    <li>прилагательные и наречия при наличии противопоставления с союзом "а": <strong>не большой, а маленький</strong>;</li>
                    <li>прилагательные и наречия с зависимыми словами: <strong>не интересный для меня роман</strong>;</li>
                    <li>слова категории состояния: <strong>не надо, не жаль</strong>;</li>
                    <li>отрицательные местоимения и наречия с предлогами: <strong>не с кем, не у кого</strong>.</li>
                </ul>
                
                <h3>Раздельное написание составных союзов</h3>
                <p>Пишутся раздельно составные союзы:</p>
                <ul>
                    <li><strong>потому что</strong>;</li>
                    <li><strong>оттого что</strong>;</li>
                    <li><strong>для того чтобы</strong>;</li>
                    <li><strong>как будто</strong>;</li>
                    <li><strong>так как</strong>.</li>
                </ul>
            `
        },
        hyphen: {
            title: 'Дефисное написание',
            content: `
                <h2>Дефисное написание слов в русском языке</h2>
                
                <h3>Дефисное написание наречий</h3>
                <p>Пишутся через дефис наречия:</p>
                <ul>
                    <li>с приставкой <em>по-</em> и суффиксами <em>-ому, -ему, -и</em>: <strong>по-новому, по-весеннему, по-русски</strong>;</li>
                    <li>с приставкой <em>во-/в-</em> и суффиксом <em>-ых/-их</em>: <strong>во-первых, в-третьих</strong>;</li>
                    <li>образованные повторением слов: <strong>еле-еле, чуть-чуть</strong>;</li>
                    <li>с частицами <em>-то, -либо, -нибудь, кое-</em>: <strong>где-то, как-нибудь, кое-где</strong>.</li>
                </ul>
                
                <h3>Дефисное написание предлогов</h3>
                <p>Пишутся через дефис предлоги:</p>
                <ul>
                    <li><strong>из-за</strong>;</li>
                    <li><strong>из-под</strong>;</li>
                    <li><strong>по-над</strong> (диалектное);</li>
                    <li><strong>по-за</strong> (диалектное).</li>
                </ul>
                
                <h3>Дефисное написание сложных слов</h3>
                <p>Пишутся через дефис:</p>
                <ul>
                    <li>сложные прилагательные, образованные от двух равноправных слов: <strong>англо-русский</strong>;</li>
                    <li>прилагательные, обозначающие оттенки цветов: <strong>ярко-красный</strong>;</li>
                    <li>сложные существительные со значением единого понятия: <strong>плащ-палатка</strong>;</li>
                    <li>географические названия, состоящие из двух существительных: <strong>Ростов-на-Дону</strong>;</li>
                    <li>числительные, записанные словами: <strong>двадцать пять (25)</strong>;</li>
                    <li>слова с приставками <em>пол-, полу-</em>: <strong>пол-лимона, полу-остров</strong>.</li>
                </ul>
            `
        }
    };

    // Вопросы для теста
    const quizQuestions = [
        {
            question: 'Как правильно пишется?',
            options: ['из-за', 'изза'],
            correct: 0,
            explanation: 'Предлог "из-за" пишется через дефис, так как это производный предлог.'
        },
        {
            question: 'Выберите правильный вариант написания',
            options: ['по русски', 'по-русски'],
            correct: 1,
            explanation: 'Наречие "по-русски" пишется через дефис, так как образовано от прилагательного с приставкой "по-" и суффиксом "-ски".'
        },
        {
            question: 'Как пишется слово?',
            options: ['не смотря на погоду', 'несмотря на погоду'],
            correct: 1,
            explanation: 'Предлог "несмотря на" пишется слитно.'
        },
        {
            question: 'Выберите правильный вариант написания',
            options: ['потому что', 'потомучто'],
            correct: 0,
            explanation: 'Составной союз "потому что" пишется раздельно.'
        },
        {
            question: 'Как правильно пишется?',
            options: ['в течение дня', 'втечение дня'],
            correct: 0,
            explanation: 'Предлог "в течение" пишется раздельно.'
        },
        {
            question: 'Выберите правильный вариант',
            options: ['кое где', 'кое-где'],
            correct: 1,
            explanation: 'Наречие "кое-где" пишется через дефис, так как содержит частицу "кое-".'
        },
        {
            question: 'Как пишется?',
            options: ['не правда', 'неправда'],
            correct: 1,
            explanation: 'Существительное "неправда" пишется слитно, так как с "не" образуется слово с противоположным значением (= ложь).'
        },
        {
            question: 'Выберите правильный вариант написания',
            options: ['полчаса', 'пол-часа'],
            correct: 0,
            explanation: 'Существительное "полчаса" пишется слитно, так как вторая часть начинается с согласной, кроме "л".'
        },
        {
            question: 'Как правильно написать?',
            options: ['по новому', 'по-новому'],
            correct: 1,
            explanation: 'Наречие "по-новому" пишется через дефис, так как образовано от прилагательного с приставкой "по-" и суффиксом "-ому".'
        },
        {
            question: 'Выберите правильный вариант',
            options: ['вследствие', 'в следствие'],
            correct: 0,
            explanation: 'Предлог "вследствие" пишется слитно, когда означает "по причине, из-за".'
        },
        {
            question: 'Как правильно написать?',
            options: ['на встречу друзьям', 'навстречу друзьям'],
            correct: 1,
            explanation: 'Предлог "навстречу" пишется слитно, когда означает "по направлению к кому-либо".'
        },
        {
            question: 'Выберите правильный вариант',
            options: ['темно синий', 'темно-синий'],
            correct: 1,
            explanation: 'Сложное прилагательное "темно-синий" пишется через дефис, так как обозначает оттенок цвета.'
        },
        {
            question: 'Как пишется?',
            options: ['не был', 'небыл'],
            correct: 0,
            explanation: 'С глаголами "не" всегда пишется раздельно.'
        },
        {
            question: 'Выберите правильный вариант',
            options: ['ненависть', 'не нависть'],
            correct: 0,
            explanation: 'Слово "ненависть" пишется слитно, так как без "не" не употребляется.'
        },
        {
            question: 'Как пишется выражение?',
            options: ['бок о бок', 'бокобок'],
            correct: 0,
            explanation: 'Наречное выражение "бок о бок" пишется раздельно.'
        },
        {
            question: 'Выберите правильный вариант',
            options: ['чуть-чуть', 'чуть чуть'],
            correct: 0,
            explanation: 'Наречие "чуть-чуть" пишется через дефис, так как образовано повторением слова.'
        },
        {
            question: 'Как пишется?',
            options: ['где нибудь', 'где-нибудь'],
            correct: 1,
            explanation: 'Наречие "где-нибудь" пишется через дефис, так как содержит постфикс "-нибудь".'
        },
        {
            question: 'Выберите правильный вариант написания',
            options: ['северо-запад', 'северозапад'],
            correct: 0,
            explanation: 'Сложное существительное "северо-запад" пишется через дефис, так как обозначает стороны света.'
        },
        {
            question: 'Как пишется?',
            options: ['впервые', 'в первые'],
            correct: 0,
            explanation: 'Наречие "впервые" пишется слитно, так как образовано от числительного с приставкой "в-".'
        },
        {
            question: 'Выберите правильный вариант',
            options: ['экс чемпион', 'экс-чемпион'],
            correct: 1,
            explanation: 'Существительное "экс-чемпион" пишется через дефис, так как первая часть – приставка "экс-".'
        },
        {
            question: 'Как пишется?',
            options: ['научно-технический', 'научнотехнический'],
            correct: 0,
            explanation: 'Сложное прилагательное "научно-технический" пишется через дефис, так как образовано от равноправных слов.'
        },
        {
            question: 'Выберите правильный вариант',
            options: ['не с кем', 'нескем'],
            correct: 0,
            explanation: 'Отрицательное местоимение с предлогом "не с кем" пишется раздельно.'
        },
        {
            question: 'Как правильно пишется?',
            options: ['в продолжение дня', 'впродолжение дня'],
            correct: 0,
            explanation: 'Предлог "в продолжение" пишется раздельно.'
        },
        {
            question: 'Выберите правильный вариант',
            options: ['по-прежнему', 'по прежнему'],
            correct: 0,
            explanation: 'Наречие "по-прежнему" пишется через дефис, так как образовано с приставкой "по-" и суффиксом "-ему".'
        },
        {
            question: 'Как пишется прощание?',
            options: ['до свидания', 'досвидания'],
            correct: 0,
            explanation: 'Выражение "до свидания" пишется раздельно, так как это сочетание предлога с существительным.'
        },
        {
            question: 'Выберите правильное написание',
            options: ['итак', 'и так'],
            correct: 0,
            explanation: 'Вводное слово "итак" пишется слитно, когда выражает вывод или заключение.'
        },
        {
            question: 'Как пишется?',
            options: ['тоже', 'то же'],
            correct: 0,
            explanation: 'Союз "тоже" пишется слитно, когда его можно заменить словом "также".'
        },
        {
            question: 'Выберите правильный вариант',
            options: ['так же, как и все', 'также, как и все'],
            correct: 0,
            explanation: 'Сочетание "так же" пишется раздельно, когда "так" - наречие, а "же" - частица.'
        },
        {
            question: 'Как пишется?',
            options: ['за чем ты следишь?', 'зачем ты следишь?'],
            correct: 0,
            explanation: 'Сочетание "за чем" пишется раздельно, когда "за" - предлог, а "чем" - местоимение.'
        },
        {
            question: 'Выберите правильное написание',
            options: ['почему', 'по чему'],
            correct: 0,
            explanation: 'Наречие "почему" пишется слитно, когда это вопросительное слово.'
        },
        {
            question: 'Как правильно написать?',
            options: ['вверх по лестнице', 'в верх по лестнице'],
            correct: 0,
            explanation: 'Наречие "вверх" пишется слитно, когда означает направление движения.'
        },
        {
            question: 'Выберите правильный вариант',
            options: ['чтобы успеть', 'что бы успеть'],
            correct: 0,
            explanation: 'Союз "чтобы" пишется слитно, когда выражает цель действия.'
        },
        {
            question: 'Как правильно написать?',
            options: ['что бы такое придумать', 'чтобы такое придумать'],
            correct: 0,
            explanation: 'Сочетание "что бы" пишется раздельно, когда "что" — местоимение (что именно?), а "бы" — частица.'
        },
        {
            question: 'Выберите правильный вариант',
            options: ['приходи попозже', 'приходи по позже'],
            correct: 0,
            explanation: 'Наречие "попозже" пишется слитно, так как образовано от слова "поздно" с приставкой "по-".'
        }
    ];

    // Загрузка словаря
    loadDictionary(dictionaryData);

    // Обработчик фильтров словаря
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const filter = this.getAttribute('data-filter');
            
            // Визуальное выделение активного фильтра
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            this.classList.add('active');
            
            // Фильтрация словаря
            if (filter === 'all') {
                loadDictionary(dictionaryData);
            } else {
                const filteredData = dictionaryData.filter(item => item.type === filter);
                loadDictionary(filteredData);
            }
        });
    });

    // Загрузка теста
    let currentQuestionIndex = 0;
    loadQuizQuestion(currentQuestionIndex);

    // Обработчик кнопки следующего вопроса
    document.getElementById('nextQuestion').addEventListener('click', function() {
        currentQuestionIndex = (currentQuestionIndex + 1) % quizQuestions.length;
        loadQuizQuestion(currentQuestionIndex);
        
        // Сброс стилей кнопок
        document.querySelectorAll('.option').forEach(btn => {
            btn.classList.remove('correct', 'wrong');
        });
    });

    // Обработчик вариантов ответа на тест
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('option')) {
            const selectedOption = parseInt(e.target.getAttribute('data-option'));
            const currentQuestion = quizQuestions[currentQuestionIndex];
            
            document.querySelectorAll('.option').forEach(btn => {
                btn.classList.remove('correct', 'wrong');
            });
            
            if (selectedOption === currentQuestion.correct) {
                e.target.classList.add('correct');
                
                // Показать объяснение
                let explanationEl = document.querySelector('.quiz-explanation');
                if (!explanationEl) {
                    explanationEl = document.createElement('div');
                    explanationEl.className = 'quiz-explanation';
                    document.querySelector('.quiz-question').appendChild(explanationEl);
                }
                explanationEl.innerHTML = `<p>✓ Верно! ${currentQuestion.explanation}</p>`;
            } else {
                e.target.classList.add('wrong');
                document.querySelectorAll('.option')[currentQuestion.correct].classList.add('correct');
                
                // Показать объяснение
                let explanationEl = document.querySelector('.quiz-explanation');
                if (!explanationEl) {
                    explanationEl = document.createElement('div');
                    explanationEl.className = 'quiz-explanation';
                    document.querySelector('.quiz-question').appendChild(explanationEl);
                }
                explanationEl.innerHTML = `<p>✗ Неверно. ${currentQuestion.explanation}</p>`;
            }
        }
    });

    // Обработчик кнопок правил
    document.querySelectorAll('.btn-more').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.preventDefault();
            const ruleType = this.getAttribute('data-type');
            const ruleData = rulesData[ruleType];
            
            const modal = document.getElementById('ruleModal');
            const modalContent = document.getElementById('modalContent');
            
            modalContent.innerHTML = ruleData.content;
            modal.style.display = 'block';
        });
    });

    // Закрытие модального окна
    document.querySelector('.close-modal').addEventListener('click', function() {
        document.getElementById('ruleModal').style.display = 'none';
    });

    // Закрытие модального окна по клику вне окна
    window.addEventListener('click', function(e) {
        const modal = document.getElementById('ruleModal');
        if (e.target === modal) {
            modal.style.display = 'none';
        }
    });

    // Поиск слова
    document.getElementById('searchBtn').addEventListener('click', searchWord);
    document.getElementById('wordSearch').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            searchWord();
        }
    });

    // Функция загрузки словаря
    function loadDictionary(data) {
        const dictionaryList = document.getElementById('dictionaryList');
        dictionaryList.innerHTML = '';
        
        if (data.length === 0) {
            dictionaryList.innerHTML = '<p class="no-results">Ничего не найдено</p>';
            return;
        }
        
        data.forEach(item => {
            const dictionaryItem = document.createElement('div');
            dictionaryItem.className = 'dictionary-item';
            
            dictionaryItem.innerHTML = `
                <h3>${item.word}</h3>
                <p>${item.explanation}</p>
                <span class="tag ${item.type}">${getTagName(item.type)}</span>
            `;
            
            dictionaryList.appendChild(dictionaryItem);
        });
    }

    // Функция загрузки вопроса теста
    function loadQuizQuestion(index) {
        const question = quizQuestions[index];
        const questionEl = document.getElementById('quiz-question');
        
        // Удаление объяснения, если оно есть
        const explanationEl = questionEl.querySelector('.quiz-explanation');
        if (explanationEl) {
            explanationEl.remove();
        }
        
        questionEl.querySelector('p').textContent = question.question;
        
        const optionsEl = questionEl.querySelector('.options');
        optionsEl.innerHTML = '';
        
        question.options.forEach((option, i) => {
            const btn = document.createElement('button');
            btn.className = 'option';
            btn.setAttribute('data-option', i);
            btn.textContent = option;
            optionsEl.appendChild(btn);
        });
    }

    // Функция поиска слова
    function searchWord() {
        const searchInput = document.getElementById('wordSearch').value.toLowerCase().trim();
        
        if (!searchInput) return;
        
        // Поиск по словарю
        const result = dictionaryData.find(item => 
            item.word.toLowerCase() === searchInput
        );
        
        // Прокрутка к словарю
        document.getElementById('dictionary').scrollIntoView({ behavior: 'smooth' });
        
        // Сброс фильтров
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelector('.filter-btn[data-filter="all"]').classList.add('active');
        
        if (result) {
            // Если найдено, показываем только это слово
            loadDictionary([result]);
            
            // Добавляем подсветку
            setTimeout(() => {
                document.querySelector('.dictionary-item').classList.add('highlight-item');
            }, 100);
        } else {
            // Если не найдено, показываем сообщение
            const dictionaryList = document.getElementById('dictionaryList');
            dictionaryList.innerHTML = `
                <div class="not-found">
                    <p>Слово "${searchInput}" не найдено в словаре.</p>
                    <p>Попробуйте другое слово или обратитесь к разделу "Правила".</p>
                </div>
            `;
        }
    }

    // Вспомогательная функция для получения названия тега
    function getTagName(type) {
        switch(type) {
            case 'together': return 'Слитно';
            case 'separate': return 'Раздельно';
            case 'hyphen': return 'Через дефис';
            default: return '';
        }
    }

    // Добавляем стили для подсветки найденного элемента
    const style = document.createElement('style');
    style.textContent = `
        .highlight-item {
            animation: pulse 1.5s ease;
            border-left: 3px solid var(--accent);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(247, 37, 133, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(247, 37, 133, 0); }
            100% { box-shadow: 0 0 0 0 rgba(247, 37, 133, 0); }
        }
        
        .quiz-explanation {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            background-color: var(--light-gray);
        }
        
        .not-found {
            text-align: center;
            padding: 30px;
            color: var(--gray);
        }
        
        .not-found p:first-child {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }
    `;
    document.head.appendChild(style);
}); 